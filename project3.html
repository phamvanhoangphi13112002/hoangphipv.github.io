<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
  <!-- Meta Tags -->
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="Laralink">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.23.4/ace.js" type="text/javascript" charset="utf-8"></script>

  <!-- Page Title -->
  <title>Hoàng Phi's Portfolio</title>
  <!-- Favicon Icon -->
  <link rel="icon" href="assets/img/Logo_phi.png" />
  <!-- Stylesheets -->
  <link rel="stylesheet" href="assets/css/bootstrap.min.css" />
  <link rel="stylesheet" href="assets/css/fontawesome.css" />
  <link rel="stylesheet" href="assets/css/slick.css" />
  <link rel="stylesheet" href="assets/css/lightgallery.min.css" />
  <link rel="stylesheet" href="assets/css/animate.css" />
  <link rel="stylesheet" href="assets/css/style.css" />
</head>

<body id="home">
  <!-- Start Header Section -->
  <header class="st-site-header st-style1 st-sticky-header">
    <div class="st-main-header">
      <div class="container">
        <div class="st-main-header-in">
          <div class="st-main-header-left">
            <a class="st-site-branding" href="index.html"><img src="assets/img/logo.png" alt="Hoàng Phi"></a>
          </div>
          <div class="st-main-header-right">
            <div class="st-nav">
              <ul class="st-nav-list st-onepage-nav">
                <li><a href="index.html#home">Home</a></li>
                <li><a href="index.html#about">About</a></li>
                <li><a href="index.html#resume">Resume</a></li>
                <li><a href="index.html#portfolio">Achievements</a></li>
                <li><a href="index.html#blog">Projects</a></li>
                <li><a href="index.html#contact">Contact</a></li>
              </ul>
              <div class="sp-phone">
                <svg viewBox="0 0 513.64 513.64">
                  <g>
                    <g>
                      <path d="M499.66,376.96l-71.68-71.68c-25.6-25.6-69.12-15.359-79.36,17.92c-7.68,23.041-33.28,35.841-56.32,30.72c-51.2-12.8-120.32-79.36-133.12-133.12c-7.68-23.041,7.68-48.641,30.72-56.32c33.28-10.24,43.52-53.76,17.92-79.36l-71.68-71.68c-20.48-17.92-51.2-17.92-69.12,0l-48.64,48.64c-48.64,51.2,5.12,186.88,125.44,307.2c120.32,120.32,256,176.641,307.2,125.44l48.64-48.64C517.581,425.6,517.581,394.88,499.66,376.96z" />
                    </g>
                  </g>
                </svg>
                <div class="sp-phone-no">+84 905 683 764</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>
  <!-- End Header Section -->

 <!-- <div class="st-content"> -->
    <div class="st-page-heading st-dynamic-bg" data-src="assets/img/blog/ProjectKmean/RFMKmeanheader.png">
      <div class="container">
        <div class="st-page-heading-in text-center">
          <h1 class="st-page-heading-title" >RFM WITH K-MEAN IN CUSTOMER SEGMENTATION</h1>
          <h2 class="mobile-version">Using Python (Cleaning, Transformation, Standardization, Visualization) and K-Mean (Clustering) </h2>
          <div class="st-post-label">
            <span>By <a href="#">Hoang Phi</a></span>
            <span>2023</span>
          </div>
        </div>
      </div>
    </div><!-- .st-page-heading -->
    <div class="st-height-b100 st-height-lg-b80"></div>
    <div class="container">
      <div class="row">
        <div class="col-lg-10 offset-md-1">
          <div class="st-post-details st-style1">
            <h2 style="justify-content: center; text-align:center; margin-bottom:1em">What is RFM and K-Mean in Customer Segmentation?</h2>
            <blockquote style="font-size: 18px;"><p>RFM stands for Recency, Frequency, and Monetary Value, and it is a technique used in marketing and customer segmentation to analyze and categorize customers based on their transaction behavior. Each of the three components has a specific meaning:</p>
              <ul>
                <li><span>Recency (R)</span>: How recently did the customer make a purchase?</li>
                <li><span>Frequency (F)</span>: How often does the customer make purchases within a specific timeframe?</li>
                <li><span>Monetary (M)</span>: How much money has the customer spent within a specific timeframe?</li>
              </ul>
              <p><span>K-Means</span> is a <span>clustering algorithm</span> used for partitioning a dataset into a <span>specified number of clusters based on the similarity of data points</span>. When using <span>K-Means with RFM analysis</span>, you are essentially using the three RFM components as features to <span>group similar customers into clusters</span>. The algorithm aims to minimize the variance within each cluster and maximize the variance between clusters.</p>
              <p>RFM Customer Segmentation helps businesses better <span>understand their customers</span>, <span>target specific segments</span> with tailored marketing efforts, enhance customer loyalty, and increase profitability through optimized <span>marketing strategies</span>.</p>
            </blockquote>
            <img class="st-zoom-in" src="assets/img/blog/ProjectKmean/Clustering.jpg" alt="dash1">
            <!-- <blockquote>View my full project: <a href="https://github.com/phamvanhoangphi13112002/CustomerSegmentation-RFMAnalysis" style="color: #fec544; text-decoration:underline" target="_blank">Here</a></blockquote> -->

            <h2 style="justify-content: center; text-align:center; margin-top:2em; margin-bottom: 1em">The Data Sources</h2>
            <p style="text-align:center; color:#fec544; font-weight:bold">Website Online Retail II</p>
            <img class="st-zoom-in" src="assets/img/blog/ProjectKmean/datasources.png" alt="dash1">
            <blockquote>Download dataset in website: <a href="https://archive.ics.uci.edu/dataset/502/online+retail+ii" style="color: #fec544; text-decoration:underline" target="_blank">Here</a></blockquote>

            <p style="text-align:center; color:#fec544; font-weight:bold">The Dataset Description</p>
            <img class="st-zoom-in" src="assets/img/blog/ProjectKmean/datadescription.png" alt="dash1">            
            <blockquote>Or download dataset in my repository: <a href="https://github.com/phamvanhoangphi13112002/RFM_and_KMean_Customer_Segmentation/tree/master/0%20-%20Data%20Source" style="color: #fec544; text-decoration:underline" target="_blank">Here</a></blockquote>
            <p style="text-align:center">In this project, <span style="text-align:center; color:#fec544; font-weight:bold" >I only use sheet "Year 2009-2010" for RFM Analysis</span></p>
            <img class="st-zoom-in" src="assets/img/blog/ProjectKmean/datasample.png" alt="dash1">            
            <h2 style="justify-content: center; text-align:center; margin-top:2em; margin-bottom:1em">Data Cleaning with Python in Google Colab</h2>
            <p style="text-align:center; color:#fec544; font-weight:bold"> Import neccessary libraries and read file: </p>
            <img class="st-zoom-in" src="assets/img/blog/ProjectKmean/import.png" alt="dash1">
            <p style="text-align:center; color:#fec544; font-weight:bold"> Data overview: </p>
            <img class="st-zoom-in" src="assets/img/blog/ProjectKmean/dataoverview.png" alt="dash1">
            <div class="grid-container21">
              <div class="column3">
                <p style="text-align:center; color:#fec544; font-weight:bold"> data.info() </p>
              </div>
              <div class="column3">
                <p style="text-align:center; color:#fec544; font-weight:bold"> data.isnull().sum() </p>

              </div>
              </div>
            
              <div class="grid-container21">
                <div class="column3">
                  
                  <img src="assets/img/blog/ProjectKmean/datainfo.png" alt="Ảnh 1">
                </div>
                <div class="column3">
                  <img src="assets/img/blog//ProjectKmean/datanull.png" alt="Ảnh 1">
                </div>
              </div>
              
              <p style="text-align:center; color:#fec544; font-weight:bold; font-size:18px; margin-top:1em"> <br>Check duplicated Value <br> <span style="font-weight: lighter; color:azure">(by this Script)</span> </p>
              <div id="editor-python" style="height:180px;font-size:15px">
                <div contenteditable="false">
#duplicated values check
data = data
data['dup_flag'] = data.groupby(['Invoice', 'StockCode', 'Quantity'])['InvoiceDate'].rank(method='first').astype(int)
duplicates = data[data['dup_flag'] > 1]
duplicates
</div></div>
                <img src="assets/img/blog/ProjectKmean/dataduplicated.png" alt="Ảnh 1">
                <!-- value<0 -->
                <p style="text-align:center; color:#fec544; font-weight:bold; font-size:18px; margin-top:1em"> Price less than 0</p>
                <img src="assets/img/blog/ProjectKmean/pricelesstham0.png" alt="Ảnh 1">
                <p style="text-align:center; color:#fec544; font-weight:bold; font-size:18px; margin-top:1em"> Quantity less than 0 </p>
                  <img src="assets/img/blog/ProjectKmean/quantitylessthan0.png" alt="Ảnh 1">
                  <p style="text-align:center; color:#fec544; font-weight:bold; font-size:18px; margin-top:1em"> Customer Null and 0 </p>
                  <img src="assets/img/blog/ProjectKmean/customerzeroandnull.png" alt="Ảnh 1">

<blockquote style="font-size: 18px; line-height:2em;">
  <p><span style="font-size: 20px; font-weight:bold; text-decoration:underline">My Exploration</span>
  </p>
  <ul>
  <li>Total Records: <span>525461 records</span>.</li>
  <li>Total Columns: <span>8 columns</span>.</li>
  <li>All columns with  <span>correct data type</span>.</li>
  <li>There are 2 columns with null values: <span>Description with 2928</span> and <span>CustomerID with 107927 null values</span>.</li>
  <li>There are <span>12326 records</span> with <span>Quantity less than 0</span>.</li>
  <li>There are <span>3 records</span> with <span>Price less than 0</span>.</li>
  <li>There are <span>107927 records</span> with <span>CustomerId equal 0 and Null values</span>.</li>
  <li>There are <span>6980 records duplicated</span>.</li>
</ul></blockquote>
<blockquote style="font-size: 18px; line-height:2em;">
  <p><span style="font-size: 20px; font-weight:bold; text-decoration:underline">The Scripts of Cleaning</span>
  </p>
  <ul>
    <li><span>Delete records</span> with <span>Quantity less than 0</span>, <span>UnitPrice less than 0</span>, <span>Customer ID equal to 0</span>, and <span>Customer ID with Null values</span>.</li>
    <li><span>Delete duplicated</span> records.</li>
    <li>Each StockCode will correspond to each individual Description. The null Description field may be due to a lack of input by the employee, so the <span>Description can be filled</span> in <span>by checking the StockCode against the previous product</span>.</li>
  
  </ul>
</blockquote>
<blockquote style="font-size: 18px; line-height:2em;"><p>Here is <span>my code for cleaning</span> in Python:</p></blockquote>
<div id="editor-python2">
  # Delete records with Quantity < 0
  data = data[data['Quantity'] > 0]
  
  # Delete records with Price < 0
  data = data[data['Price'] > 0]
  
  # Delete records with Customer ID = 0 or Customer ID is Null
  data = data[(data['Customer ID'] != 0) & (data['Customer ID'].notnull())]
  
  # Delete duplicated values
  data['dup_flag'] = data.groupby(['Invoice', 'StockCode', 'Quantity'])['InvoiceDate'].rank(method='first').astype(int)
  data = data[data['dup_flag'] == 1]
  data = data.drop(columns=['dup_flag'])
  # Create a dictionary that maps each StockCode to its corresponding Description
  stockcode_to_description = data.dropna(subset=['Description']).drop_duplicates('StockCode').set_index('StockCode')['Description'].to_dict()
  # Filling the missing values in Description
  # Define a function to fill missing Description based on StockCode
  def fill_missing_description(row):
      if pd.isnull(row['Description']):
          return stockcode_to_description.get(row['StockCode'], None)
      else:
          return row['Description']
  
  # Apply the function to the 'Description' column
  data['Description'] = data.apply(fill_missing_description, axis=1)
</div>
<p style="text-align:center; color:#fec544; font-weight:bold; font-size:18px; margin-top:1em"> <br>Data After Clean (with 400901 Records)<br><span style="font-weight: lighter; color:azure">(Save it to new files)</span></p>
<img src="assets/img/blog/ProjectKmean/dataafterclean.png" alt="Ảnh 1">
<blockquote style="font-size: 18px; line-height:2em;"><p>Download the Data After Cleaning: <a href="https://github.com/phamvanhoangphi13112002/RFM_and_KMean_Customer_Segmentation/tree/master/1%20-%20Data%20Cleaning" target='_blank'style="color: #fec544;text-decoration:underline">Here</a></p></blockquote>

<h2 style="justify-content: center; text-align:center; margin-top:2em; margin-bottom:1em">Python Script - Calculate RFM Value</h2>
<div class="editor-container">
<div id="editor-pythonRFM">
<div  contenteditable="false">
  # Calculate RFM
  # R - Recency Value:
  current_date = max(data['InvoiceDate']) + dt.timedelta(days=1)
  # F - Frequency and M - Monetary Value:
  data['TotalPrice'] = data['Quantity']*data['Price']
  rfm_data = data.groupby('Customer ID').agg({
      'InvoiceDate': lambda x: (current_date- x.max()).days,  
      'Invoice': 'nunique',  
      'TotalPrice': 'sum'  
  }).reset_index()
  
  # Change name
  rfm_data.columns = ['CustomerID', 'Recency', 'Frequency', 'Monetary']
  
  # Result
  print(rfm_data)
  </div>

</div>

<p style="text-align:center; color:#fec544; font-weight:bold; font-size:18px; margin-top:1em"> <br>RFM Value Table<br><span style="font-weight: lighter; color:azure">(for 4312 CustomerID)</span></p>
<div class="grid-container21">
  <div class="column3">
    <p style="text-align:center; color:#fec544; font-weight:bold"> RFM Value Table </p>
  </div>
  <div class="column3">
    <p style="text-align:center; color:#fec544; font-weight:bold"> rfm_data.info() </p>

  </div>
  </div>

  <div class="grid-container21">
    <div class="column3">
      
      <img src="assets/img/blog/ProjectKmean/rfm_table.png" alt="Ảnh 1">
    </div>
    <div class="column3">
      <img src="assets/img/blog//ProjectKmean/rfm_info.png" alt="Ảnh 1">
    </div>
  </div>
<h2 style="justify-content: center; text-align:center; margin-top:2em; margin-bottom:1em">Transformation and Scaler</h2>
<p style="text-align:center; color:#fec544; font-weight:bold; font-size:18px; margin-top:1em">Display the distribution to check</p>
<div id="editor-pythonDis"><div  contenteditable="false">
  fig, ax = plt.subplots(1, 3, figsize=(15,4))
  # Recency distribution
  sns.distplot(rfm_data['Recency'], ax = ax[0])
  # Frequency distribution
  sns.distplot(rfm_data['Frequency'], ax = ax[1])
  # Monetary distribution
  sns.distplot(rfm_data['Monetary'], ax = ax[2])
  plt.show()
    </div>
  
  </div>
<img src="assets/img/blog/ProjectKmean/distribution.png" alt="Ảnh 1">

<blockquote style="font-size: 18px; line-height:2em;">
  <p>We have some problems:
  </p>
  <ul>
      <li><span>Recency</span> distribution is <span>right-skewed</span>.</li>
      <li><span>Frequency</span> distribution is <span>right-skewed and leptokurtic</span>.</li>
      <li><span>Monetary</span> distribution is <span>right-skewed and leptokurtic</span>.</li>
    </ul>
    <p> All three fields do not follow a normal distribution of data. <br> 
      <span>It is neccessary to transformation data before using K-mean.</span></p>
</blockquote>
<blockquote style="font-size: 18px; line-height:2em;">
  <p>Some method for transformation data:
  </p>
  <ul>
      <li><span>log</span> transformation.</li>
      <li><span>square root </span>transformation.</li>
      <li><span>box-cox </span>transformation.</li>
      <li><span>cube root </span>transformation.</li>
    </ul>
</blockquote>
<p style="text-align:center; color:#fec544; font-weight:bold; font-size:18px; margin-top:1em">analyze_skewness function:</p>
<div id="editor-pythonfunction">
def analyze_skewness(x):
    fig, ax = plt.subplots(2,3, figsize=(5,5))
    sns.distplot(rfm_data[x], ax=ax[0,0])
    sns.distplot(np.log(rfm_data[x]), ax=ax[0,1])
    sns.distplot(np.sqrt(rfm_data[x]), ax=ax[1,0])
    sns.distplot(stats.boxcox(rfm_data[x])[0], ax=ax[1,2])
    sns.histplot(np.cbrt(rfm_data[x]), ax=ax[1, 1]) 
    plt.tight_layout()
    plt.show()
    #Print result 
    print("Original Skewness:", rfm_data[x].skew().round(2))
    print("Log-transformed Skewness:", np.log(rfm_data[x]).skew().round(2))
    print("Square Root-transformed Skewness:", np.sqrt(rfm_data[x]).skew().round(2))
    print("Box-Cox transformed Skewness:", pd.Series(stats.boxcox(rfm_data[x])[0]).skew().round(2))
    print("Cube Root-transformed Skewness:", pd.Series(np.cbrt(rfm_data[x])).skew().round(2))
</div>
<div class="grid-container1">
  <div class="column1">
    <p style="text-align:center">analyze_skewness <span style="color: #fec544;">('Recency')</span></p>
  </div>
  <div class="column1">
    <p style="text-align:center">analyze_skewness <span style="color: #fec544;">('Frequency')</span></p>
  </div>
  <div class="column1">
    <p style="text-align:center">analyze_skewness <span style="color: #fec544;">('Monetary')</span></p>
  </div>
</div>
<div class="grid-container">
  <div class="column">
    <img src="assets/img/blog/ProjectKmean/recencyskew.png" alt="Ảnh 1">
  </div>
  <div class="column">
    <img src="assets/img/blog/ProjectKmean/frequencyskew.png" alt="Ảnh 2">
  </div>
  <div class="column">
    <img src="assets/img/blog/ProjectKmean/monetaryskew.png" alt="Ảnh 3">
  </div>
</div>
<div class="grid-container1">
  <div class="column1">
    <p>
      <ul style="text-align:left;color:white; font-size:14px">
      <li><span style="color: #fec544;">Original</span> Skewness: <span style="color: #fec544;">1.28</span>.</li>
      <li><span style="color: #fec544;">Log </span>transformed Skewness: <span style="color: #fec544;">-0.61</span>.</li>
      <li><span style="color: #fec544;">Square Root </span>transformed Skewness: <span style="color: #fec544;">0.59</span>.</li>
      <li style="font-weight:bold"><span style="color: #fec544;">Box-Cox </span> transformed Skewness: <span style="color: #fec544; font-weight:bold">-0.07</span>.</li>
      <li><span style="color: #fec544;">Cube root </span>transformed Skewness: <span style="color: #fec544;">0.27</span>.</li>

    </ul></p>
  </div>
  <div class="column1">
    <p>
      <ul style="text-align:left;color:white; font-size:14px">
      <li><span style="color: #fec544;">Original</span> Skewness: <span style="color: #fec544;">10.55</span>.</li>
      <li><span style="color: #fec544;">Log </span>transformed Skewness: <span style="color: #fec544;">0.74</span>.</li>
      <li><span style="color: #fec544;">Square Root </span>transformed Skewness: <span style="color: #fec544;">3.12</span>.</li>
      <li style="font-weight:bold"><span style="color: #fec544;">Box-Cox </span> transformed Skewness: <span style="color: #fec544; font-weight:bold">0.13</span>.</li>
      <li><span style="color: #fec544;">Cube root </span>transformed Skewness: <span style="color: #fec544;">1.96</span>.</li>

    </ul></p>  </div>
  <div class="column1">
    <p>
      <ul style="text-align:left;color:white; font-size:14px">
      <li><span style="color: #fec544;">Original</span> Skewness: <span style="color: #fec544;">24.0</span>.</li>
      <li><span style="color: #fec544;">Log </span>transformed Skewness: <span style="color: #fec544;">0.25</span>.</li>
      <li><span style="color: #fec544;">Square Root </span>transformed Skewness: <span style="color: #fec544;">5.8</span>.</li>
      <li style="font-weight:bold"><span style="color: #fec544;">Box-Cox </span> transformed Skewness: <span style="color: #fec544; font-weight:bold">-0.01</span>.</li>
      <li><span style="color: #fec544;">Cube root </span>transformed Skewness: <span style="color: #fec544;">2.77</span>.</li>

    </ul></p> </div>
</div>

<blockquote style="font-size: 18px; line-height:2em;">
  <p>All data fields are well-suited for <span>Box-Cox transformation</span> as the Box-Cox values are <span>closest to zero</span>.
  </p>
</blockquote>
<p style="text-align:center; color:#fec544; font-weight:bold; font-size:18px; margin-top:1em">Feature Transformation</p>
<div id="editor-pythontrans">
rfm_data_t=pd.DataFrame()
# Tranform Recency to box-cox transformation 
rfm_data_t['Recency']=stats.boxcox(rfm_data['Recency'])[0]
# Tranform Frequency to box-cox transformation 
rfm_data_t['Frequency']=stats.boxcox(rfm_data['Frequency'])[0]
# Tranform Monetary to box-cox transformation 
rfm_data_t['Monetary']=stats.boxcox(rfm_data['Monetary'])[0]
print(rfm_data_t)
  </div>
  <div class="grid-container21">
    <div class="column3">
      
      <img src="assets/img/blog/ProjectKmean/rfm_trans.png" alt="Ảnh 1" style="justify-content:center">
    </div>
    <div class="column3">
      <img src="assets/img/blog/ProjectKmean/rfm_trans_info.png" alt="Ảnh 1" style="justify-content:center">
    </div>
  </div>
  <p style="text-align:center; color:#fec544; font-weight:bold; font-size:18px; margin-top:1em">Scaler Data</p>


    <div class="grid-container21">
      <div class="column3">
        <div id="editor-pythonscaler">
#Scale data
from sklearn.preprocessing import StandardScaler
scaler = StandardScaler()
scaler.fit(rfm_data_t)
rfm_data_t_scaler = scaler.transform(rfm_data_t)
pd.DataFrame(rfm_data_t_scaler)
                        </div>
      </div>
      <div class="column3">
        <img src="assets/img/blog/ProjectKmean/data_scaler.png" alt="Ảnh 1" style="justify-content:center">

      </div>
    </div>

<h2 style="justify-content: center; text-align:center; margin-top:3em">Using K-mean to Clustering</h2>
<p style="text-align:center; color:#fec544; font-weight:bold; font-size:18px; margin-top:1em">Using Elbow to identify the number of cluster</p>
    <div id="editor-pythonelbow">
# Use Elbow Method
from sklearn.cluster import KMeans
sse = {}
for k in range(1, 11):
    kmeans = KMeans(n_clusters=k, random_state=42)
    kmeans.fit(rfm_data_t_scaler)
    sse[k] = kmeans.inertia_
# Visualization
plt.title('The Elbow Method')
plt.xlabel('k')
plt.ylabel('SSE')
sns.pointplot(x=list(sse.keys()), y=list(sse.values()))
plt.show()
                              </div>  


    <img src="assets/img/blog/ProjectKmean/elbowmethod.png" alt="Ảnh 1" style="justify-content: center;">


<p style="text-align:center; color:#fec544; font-weight:bold; font-size:18px; margin-top:1em">Using Silhouette Score to identify the number of cluster</p>
<div id="editor-pythonsilhoutte">
  # Using Silhouette Method
  silhouette_scores = []
  possible_k_values = range(2, 11)  # k from 2 to 10
  for k in possible_k_values:
      kmeans = KMeans(n_clusters=k, random_state=42)
      kmeans.fit(rfm_data_t_scaler)
      labels = kmeans.labels_
      silhouette_scores.append(silhouette_score(rfm_data_t_scaler, labels))
        
  # Visualize Silhouette Score for each k value
  plt.figure(figsize=(10, 6))
  plt.plot(possible_k_values, silhouette_scores, marker='o')
  plt.title('Silhouette Score for Different k')
  plt.xlabel('Number of Clusters (k)')
  plt.ylabel('Silhouette Score')
  plt.xticks(possible_k_values)
  plt.grid(True)
  plt.show()
                                </div>  
<img src="assets/img/blog/ProjectKmean/silhouttescore.png" alt="Ảnh 1" style="justify-content: center;">
<div id="editor-pythonviz">
  from yellowbrick.cluster import SilhouetteVisualizer
  # Visualize
  fig, ax = plt.subplots(2, 2, figsize=(15, 9))
  for idx, k in enumerate([2, 3, 4, 5]):
      km = KMeans(n_clusters=k, init='k-means++', n_init=10, max_iter=100, random_state=42)
      q, mod = divmod(idx, 2)
  
      visualizer = SilhouetteVisualizer(km, colors='yellowbrick', ax=ax[q][mod])
      visualizer.fit(rfm_data_t_scaler)
      ax[q][mod].text(0.5, -0.1, f'Silhouette Score: {np.mean(visualizer.silhouette_score_):.2f}', size=12, 
      ha='center', transform=ax[q][mod].transAxes)
  plt.tight_layout()
  plt.show()
                                </div>  
<img src="assets/img/blog/ProjectKmean/silhoutteviz.png" alt="Ảnh 1" style="justify-content: center;">
<blockquote style="font-size: 18px; line-height:2em;">
  <p><span style="font-size: 20px; font-weight:bold; text-decoration:underline">As the graph visualized above is:</span>
  </p>
  <ul>
    <li>In <span>both two method</span>, we <span>won't choose</span>  <span>k =2</span> because it <span>doesn't has the good cluster</span>.</li>
    <li>In the <span>Elbow method</span>, we will choose <span>k = 4</span> because this score represents a relatively <span>large reduction</span> in <span>SSE compared to the previous k</span>.</li>
    <li>In the <span>Silhouette method</span>, we will choose <span>k = 4</span> because with k = 4 <span>having highest Silhouette Score</span> and the <span>number of good clusters</span>.</li>
  </ul>
  <p><span style="font-size: 20px; font-weight:bold; font-style:italic">So I choose k = 4 for clustering </span>

</blockquote>
<p style="text-align:center; color:#fec544; font-weight:bold; font-size:18px; margin-top:1em">Clustering</p>
<div id="editor-pythoncluster">
  from mpl_toolkits.mplot3d import Axes3D
  #Choose k = 4 and fit it with data
  k = 4
  kmeans = KMeans(n_clusters=k, init='k-means++', n_init=10, max_iter=100, random_state=42)
  clusters = kmeans.fit_predict(rfm_data_t_scaler)
  rfm_data_t_scaler['Cluster'] = clusters
  rfm_data['Cluster'] = clusters
  
  # Visualize with 3D graph by Recency, Frequency and Monetary
  fig = plt.figure(figsize=(13, 10))
  ax = fig.add_subplot(111, projection='3d')
  
  for i in range(k):
      cluster_data = rfm_data_t_scaler[rfm_data_t_scaler['Cluster'] == i]
      ax.scatter(cluster_data['Recency'], cluster_data['Frequency'], cluster_data['Monetary'], label=f'Cluster {i+1}')
  
  ax.set_xlabel('Recency (Scaled)')
  ax.set_ylabel('Frequency (Scaled)')
  ax.set_zlabel('Monetary (Scaled)')
  ax.set_title('RFM Clustering (3D Scatter Plot)')
  ax.legend()
  plt.show()
  
</div>
<img src="assets/img/blog/ProjectKmean/scatterplot.png" alt="Ảnh 1" style="justify-content: center;">
<blockquote style="font-size: 18px; line-height:2em;">
  <p> This is data <span>After</span> clustering. We can see that the <span>data is clustered.</span></p>
</blockquote>
<h2 style="justify-content: center; text-align:center; margin-top:3em">Group data by cluster and Analysis</h2>

    <div id="editor-pythongroupby">
      rfm_data.groupby('Cluster').agg(
        {
            'Recency':'mean',
            'Frequency':'mean',
            'Monetary':'mean'
        }
    ).round(2)
                              </div>  

<img src="assets/img/blog/ProjectKmean/groupby.png" alt="Ảnh 1" style="justify-content: center;">



<blockquote style="font-size: 18px; line-height:2em;">
  <p span style="font-size: 20px; font-weight:bold;  color:#fec544">Cluster 0 - "Loyal High-Spending Customers":
  </p>
  <p>Metric:</p>
  <ul>
    <li>Recency: <span>16.05 (Recent)</span></li>
    <li>Frequency: <span>10.85 (Frequent)</span></li>
    <li>Monetary: <span>5682.21 (High spending)</span></li>
    <!-- <li>The cohort of 2011-01-01 had 417 customers, which is the cohort with the lowest number of customers among all cohorts. </li>-->
  </ul>
  
  <p>This segment comprises customers who have made <span>recent, frequent purchases and have a high spending level</span>. 
    They might be loyal and significant customers for your business. <br>Marketing strategies for this group could include:</p>
  <ul>
    <li><span>Special offers</span>: Provide exclusive discounts, special offers, or gifts for their next purchase to honor their loyalty.</li>
    <li><span>Membership program</span>: Encourage them to join a loyalty program to receive more benefits from their shopping.</li>
  </ul>
</blockquote>
<blockquote style="font-size: 18px; line-height:2em;">
  <p span style="font-size: 20px; font-weight:bold;  color:#fec544">Cluster 1 - "Infrequent Low-Spending Customers":
  </p>
  <p>Metric:</p>
  <ul>
    <li>Recency: <span>36.51 (Quite a while)</span></li>
    <li>Frequency: <span>1.41 (Infrequent)</span></li>
    <li>Monetary: <span>383.47 (Low spending)</span></li>
    <!-- <li>The cohort of 2011-01-01 had 417 customers, which is the cohort with the lowest number of customers among all cohorts. </li>-->
  </ul>
  
  <p>This segment consists of customers who make <span>infrequent purchases with low spending</span>. They could be potential customers that need to be motivated to increase their purchases and spending. <br>
    Marketing strategies for this group could include:
  </p>
  <ul>
    <li><span>Re-engagement campaigns</span>: Send emails or push notifications with appealing offers to encourage them to return for shopping.</li>
    <li><span>Bundle promotions</span>: Offer additional products or services with their orders to enhance the value of their purchases.</li>
  </ul>
</blockquote>
<blockquote style="font-size: 18px; line-height:2em;">
  <p span style="font-size: 20px; font-weight:bold;  color:#fec544">Cluster 2 - "Occasional Medium-Spending Customers":
  </p>
  <p>Metric:</p>
  <ul>
    <li>Recency: <span>91.34 (Quite a while)</span></li>
    <li>Frequency: <span>3.55 (Infrequent)</span></li>
    <li>Monetary: <span>1381.49 (Moderate spending)</span></li>
    <!-- <li>The cohort of 2011-01-01 had 417 customers, which is the cohort with the lowest number of customers among all cohorts. </li>-->
  </ul>
  
  <p>This segment includes customers who <span>shop occasionally with moderate spending</span>. They have the potential to increase their purchases if motivated appropriately. <br>Marketing strategies for this group could include:
  </p>
  <ul>
    <li><span>Stimulus campaigns</span>: Use email marketing or advertisements to introduce new and attractive products.</li>
    <li><span>Loyalty points program</span>: Encourage them to shop more frequently by offering loyalty points that can be redeemed for rewards.</li>
  </ul>
</blockquote>
<blockquote style="font-size: 18px; line-height:2em;">
  <p span style="font-size: 20px; font-weight:bold;  color:#fec544">Cluster 3 - "Rare Low-Spending Inactive Customers":
  </p>
  <p>Metric:</p>
  <ul>
    <li>Recency: <span>228.80 (Quite a while)</span></li>
    <li>Frequency: <span>1.17 (Infrequent)</span></li>
    <li>Monetary: <span>280.44 (Moderate spending)</span></li>
    <!-- <li>The cohort of 2011-01-01 had 417 customers, which is the cohort with the lowest number of customers among all cohorts. </li>-->
  </ul>
  
  <p>This segment contains customers <span>who rarely shop, haven't been active recently, and have low spending</span>. They might be challenging to re-engage. <br>Marketing strategies for this group could include:
  </p>
  <ul>
    <li><span>Recovery campaigns</span>: Use email marketing or advertisements to introduce new and attractive products.</li>
    <li><span>Feedback surveys</span>:  Gather their opinions about products or services to improve their shopping experience and attract them back.</li>
  </ul>
</blockquote>
<blockquote>View my full project: <a href="https://github.com/phamvanhoangphi13112002/RFM_and_KMean_Customer_Segmentation" style="color: #fec544; text-decoration:underline" target="_blank">Here</a></blockquote>

<!-- <p>There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration some form, by injected humour, or randomised words which don't look even slightly believable. If you are going to use passage of Lorem Ipsum.</p>
<h2>Phosfluorescently engage worldwide?</h2>
<p>Proactively envisioned multimedia based expertise and cross-media growth strategies. Seamlessly visualize quality intellectual capital without superior collaboration and idea-sharing. Holistically pontificate installed base portals after maintainable products.</p>

<div class="st-height-b20 st-height-lg-b20"></div>
<p>Capitalize on low hanging fruit to identify a ballpark value added activity to beta test. Override the digital divide with additional clickthroughs from DevOps. Nanotechnology immersion along the information highway will close the loop on focusing solely on the bottom line.</p>
</div> -->
<div class="st-height-b35 st-height-lg-b35"></div>
<div class="st-post-meta">
<div class="st-post-tages">
  <h4 class="st-post-tage-title">Skill:</h4>
  <ul class="st-post-tage-list st-mp0">
    <li><a href="#">Python</a></li>
    <li><a href="#">Unsupervised Machine Learning</a></li>
    <!-- <li><a href="#">web</a></li>
    <li><a href="#">business</a></li>
    <li><a href="#">agency</a></li>
    <li><a href="#">development</a></li> -->
  </ul>
</div>
<!-- <div class="st-post-share">
  <h4 class="st-post-share-title">Share:</h4>
  <div class="st-post-share-btn-list">
     <a href="#"><i class="fab fa-facebook-f"></i></a> 
     <a href="#"><i class="fab fa-twitter"></i></a> 
     <a href="#"><i class="fab fa-behance"></i></a> 
     <a href="#"><i class="fab fa-instagram"></i></a> 
     <a href="#"><i class="fab fa-pinterest-p"></i></a>
  </div>
</div> -->
</div>
<div class="st-height-b60 st-height-lg-b60"></div>
</div>
<div class="st-post-btn-gropu">
<a href="./project2.html" class="st-btn st-style2 st-color1 st-size-medium">Previous Post</a>
<a href="./project4.html" class="st-btn st-style2 st-color1 st-size-medium">Next Post</a>
</div>
</div>
<div class="st-height-b60 st-height-lg-b60"></div>
<div class="st-social-info" >
<div class="st-social-text" style="line-height: 1.8em;">Visits my social profile and get connected:</div>
<div class="st-social-link">
<a href="https://github.com/phamvanhoangphi13112002" class="st-social-btn active" target = '_blank'>
<span class="st-social-icon"><i class="fab fab fa-github"></i></span>
<span class="st-icon-name">Github</span>
</a>
<a href="https://www.linkedin.com/in/pham-van-hoang-phi-8a439226a/" class="st-social-btn", target = '_blank'>
<span class="st-social-icon"><i class="fab fa-linkedin"></i></span>
<span class="st-icon-name">LinkedIn</span>
</a>
<a href="https://www.facebook.com/hoangphi1311" class="st-social-btn", target = '_blank'>
<span class="st-social-icon"><i class="fab fa-facebook-f"></i></span>
<span class="st-icon-name">Facebook</span>
</a>
<a href="mailto:hoangphi1311.gpa@gmail.com" class="st-social-btn", target = '_blank'>
<span class="st-social-icon"><i class="fa fa-envelope"></i></span>
<span class="st-icon-name">Gmail</span>
</a>
</div>
</div>
</div>

</div>
</div>
<div class="st-height-b100 st-height-lg-b80"></div>
</div>


<!-- Start Footer Seciton -->
<footer>
<div class="container">
<div class="st-copyright-wrap text-center">
<div class="st-copyright-text">© 2023. Designed by HoangPhi. All right reserved.</div>
</div>
</div>
</footer>
<!-- End Footer Seciton -->
<a id="back-to-top" href="#home">
  <i class="fa fa-arrow-up"></i>
</a>
<!-- Scripts -->
<script src="assets/js/jquery-1.12.4.min.js"></script>
<script src="assets/js/jquery.slick.min.js"></script>
<script src="assets/js/lightgallery.min.js"></script>
<script src="assets/js/wow.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.5.3/ace.js"></script>

<script src="assets/js/ripples.min.js"></script>
<script src="assets/js/particles.min.js"></script>
<script src="assets/js/main.js"></script>
</body>

</html>